<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <!-- Bootstrap  -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">

  <!-- Jquery -->
  <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
    crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link rel="shortcut icon" href="/static/favicon.ico" type="image/x-icon" />
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="{{ url_for('static', filename='style-admin.css') }}">
  <script src="{{ url_for('static', filename='script.js') }}"></script>
  <title>Survey Kepuasan Masyarakat Dinas Kependudukan dan Pencatatan Sipil Kota Semarang</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

  <!-- Modal Pop Up untuk Detail -->
  <script>
    $(document).ready(function () {
      // Menambahkan event listener untuk baris tabel
      $('tr.data-row').click(function () {
        // Ambil data dari baris yang diklik
        var layanan = $(this).find('td:eq(1)').text();
        var kritik = $(this).find('td:eq(2)').text();
        var saran = $(this).find('td:eq(3)').text();

        // tes
        var usia = $(this).find('.d-none').data('usia');
        var jenis_kelamin = $(this).find('.d-none').data('jenis_kelamin');
        var pendidikan = $(this).find('.d-none').data('pendidikan');
        var pekerjaan = $(this).find('.d-none').data('pekerjaan');
        var skor = $(this).find('.d-none').data('skor');
        var tanggal_dibuat = $(this).find('.d-none').data('waktu_dibuat');

        // Menetapkan nilai data ke dalam modal
        $('#modalContent').html('<p><strong>Jenis Layanan : </strong>' + layanan + '</p>' +
          '<p><strong>Kritik <tab>: </strong>' + kritik + '</p>' +
          '<p><strong>Saran: </strong>' + saran + '</p> <hr>' +
          '<h5><strong>Biodata Responden</strong>' + '</h5>' +
          '<p><strong>Jenis Kelamin: </strong>' + jenis_kelamin + '</p>' +
          '<p><strong>Usia: </strong>' + usia + '</p>' +
          '<p><strong>Pendidikan: </strong>' + pendidikan + '</p>' +
          '<p><strong>Pekerjaan: </strong>' + pekerjaan + '</p>' +
          '<p><strong>Skor: </strong>' + skor + '/100' + '</p>' +
          '<p><strong>Tanggal dan Waktu Dibuat: </strong>' + tanggal_dibuat + '</p>'
        );

        // Tampilkan modal dengan efek fadeIn
        $('#detailModal').fadeIn();
      });

      // Menutup modal saat tombol "Close" atau area di luar modal diklik
      $('.close').click(function () {
        $('#detailModal').css('display', 'none');
      });

      $(window).click(function (event) {
        if (event.target == $('#detailModal')[0]) {
          $('#detailModal').fadeOut();
        }
      });
    });

  </script>
</head>

<body>
  <aside>
    <div class="toggle">
      <div class="logo">
        <img src="/static/images/LOGOCAPIL2.png">
        <h2>ADMIN<span class="primary">DUKCAPIL</span></h2>
      </div>
      <div class="close" id="close-btn">
        <span class="material-icons-sharp">
          close
        </span>
      </div>
    </div>

    <!--  !Dark Mode & Profile (Jangan diapus) -->
    <div class="right-section">
      <!-- <div class="nav">
        <button id="menu-btn">
          <span class="material-icons-sharp">
            menu
          </span>
        </button>
        <div class="dark-mode">
          <span class="material-icons-sharp active">
            light_mode
          </span>
          <span class="material-icons-sharp">
            dark_mode
          </span>
        </div>

        <div class="profile">
          <div class="info">
            <p style="margin: 0;">Hey, <b>Reza</b></p>
            <small class="text-muted">Admin</small>
          </div>
          <div class="profile-photo">
            <img src="/static/images/profile-dummy.png">
          </div>
        </div>

      </div> -->
      <!-- End of Nav -->
    </div>

    <div class="sidebar">
      <a href="/admin-page">
        <span class="material-icons-sharp">
          dashboard
        </span>
        <h3>Dashboard</h3>
      </a>
      <a href="/statistik_dashboard" class="active">
        <span class="material-icons-sharp">
          insights
        </span>
        <h3>Statistik</h3>
      </a>
      <a href="/form_dashboard">
        <span class="material-icons-sharp">
          receipt_long
        </span>
        <h3>Edit Form</h3>
      </a>
      <a href="/">
        <span class="material-icons-sharp">
          home
        </span>
        <h3>Home</h3>
      </a>
      <!-- <a href="#">
        <span class="material-icons-sharp">
          add
        </span>
        <h3>New Login</h3>
      </a> -->
      <a href="#">
        <span class="material-icons-sharp">
          logout
        </span>
        <h3>Logout</h3>
      </a>

    </div>
  </aside>
</body>
<!-- HTML -->
<canvas id="genderChart" width="400" height="400""></canvas>

<!-- TODO: Chart -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Data berdasarkan jenis kelamin
  var genderData = {
    labels: ['Laki-laki', 'Perempuan'],
    datasets: [{
      data: [60, 40], // Misalnya, 60% laki-laki dan 40% perempuan
      backgroundColor: [
        'rgba(255, 99, 132, 0.5)', // Warna untuk laki-laki
        'rgba(54, 162, 235, 0.5)'   // Warna untuk perempuan
      ],
      borderColor: [
        'rgba(255, 99, 132, 1)',
        'rgba(54, 162, 235, 1)'
      ],
      borderWidth: 1
    }]
  };

  // Konfigurasi diagram
  var genderOptions = {
    title: {
      display: true,
      text: 'Diagram Jenis Kelamin'
    },
    legend: {
      display: true,
      position: 'bottom', // Penempatan keterangan di bagian bawah
      labels: {
        fontColor: 'black', // Warna teks keterangan
        fontSize: 14,
        boxWidth: 20 // Lebar kotak warna
      }
    }
  };

  // Inisialisasi dan render diagram bulat
  var ctx = document.getElementById('genderChart').getContext('2d');
  var genderChart = new Chart(ctx, {
    type: 'doughnut',
    data: genderData,
    options: genderOptions
  });
</script>

<!-- Script of origin JS -->
<script>
  const sideMenu = document.querySelector('aside');
  const menuBtn = document.getElementById('menu-btn');
  const closeBtn = document.getElementById('close-btn');

  const darkMode = document.querySelector('.dark-mode');

  menuBtn.addEventListener('click', () => {
    sideMenu.style.display = 'block';
  });

  closeBtn.addEventListener('click', () => {
    sideMenu.style.display = 'none';
  });

  darkMode.addEventListener('click', () => {
    document.body.classList.toggle('dark-mode-variables');
    darkMode.querySelector('span:nth-child(1)').classList.toggle('active');
    darkMode.querySelector('span:nth-child(2)').classList.toggle('active');
  })


  Orders.forEach(order => {
    const tr = document.createElement('tr');
    const trContent = `
      <td>${order.productName}</td>
      <td>${order.productNumber}</td>
      <td>${order.paymentStatus}</td>
      <td class="${order.status === 'Declined' ? 'danger' : order.status === 'Pending' ? 'warning' : 'primary'}">${order.status}</td>
      <td class="primary">Details</td>
  `;
    tr.innerHTML = trContent;
    document.querySelector('table tbody').appendChild(tr);
  });
  // End of origin JS
</script>
<!-- Script of active sidebar -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Mengambil semua tautan di dalam sidebar
    const sidebarLinks = document.querySelectorAll('.sidebar a');

    // Menambahkan event listener untuk setiap tautan
    sidebarLinks.forEach(function (link) {
      link.addEventListener('click', function () {
        // Menghapus kelas active dari semua tautan
        sidebarLinks.forEach(function (item) {
          item.classList.remove('active');
        });

        // Menambahkan kelas active ke tautan yang diklik
        this.classList.add('active');
      });
    });
  });
</script>
</html>